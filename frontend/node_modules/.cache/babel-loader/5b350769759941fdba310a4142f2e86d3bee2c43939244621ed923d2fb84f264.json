{"ast":null,"code":"import _objectSpread from\"C:/Users/USER/OneDrive/Desktop/ecommerce/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useReducer,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const ReviewsContext=/*#__PURE__*/createContext();const reviewsReducer=(state,action)=>{switch(action.type){case'LOAD_REVIEWS':return _objectSpread(_objectSpread({},state),{},{reviews:action.payload,loading:false});case'ADD_REVIEW':const newReviews=[...state.reviews,action.payload];localStorage.setItem('productReviews',JSON.stringify(newReviews));return _objectSpread(_objectSpread({},state),{},{reviews:newReviews});case'UPDATE_REVIEW':const updatedReviews=state.reviews.map(review=>review.id===action.payload.id?action.payload:review);localStorage.setItem('productReviews',JSON.stringify(updatedReviews));return _objectSpread(_objectSpread({},state),{},{reviews:updatedReviews});case'DELETE_REVIEW':const filteredReviews=state.reviews.filter(review=>review.id!==action.payload);localStorage.setItem('productReviews',JSON.stringify(filteredReviews));return _objectSpread(_objectSpread({},state),{},{reviews:filteredReviews});case'SET_LOADING':return _objectSpread(_objectSpread({},state),{},{loading:action.payload});default:return state;}};const initialState={reviews:[],loading:true};export const ReviewsProvider=_ref=>{let{children}=_ref;const[state,dispatch]=useReducer(reviewsReducer,initialState);// Load reviews from localStorage on app start\nuseEffect(()=>{const savedReviews=localStorage.getItem('productReviews');if(savedReviews){try{const parsedReviews=JSON.parse(savedReviews);dispatch({type:'LOAD_REVIEWS',payload:parsedReviews});}catch(error){console.error('Error loading reviews:',error);dispatch({type:'LOAD_REVIEWS',payload:[]});}}else{// Initialize with sample reviews\nconst sampleReviews=[{id:1,productId:'1',userId:'user1',userName:'John Doe',rating:5,title:'Amazing quality!',comment:'This product exceeded my expectations. Great quality and fast delivery.',date:new Date().toISOString(),verified:true,helpful:12,notHelpful:1},{id:2,productId:'1',userId:'user2',userName:'Sarah Wilson',rating:4,title:'Good value for money',comment:'Nice product overall. Good quality but took a while to arrive.',date:new Date(Date.now()-7*24*60*60*1000).toISOString(),verified:true,helpful:8,notHelpful:0}];dispatch({type:'LOAD_REVIEWS',payload:sampleReviews});localStorage.setItem('productReviews',JSON.stringify(sampleReviews));}},[]);const addReview=review=>{const newReview=_objectSpread(_objectSpread({},review),{},{id:Date.now(),date:new Date().toISOString(),helpful:0,notHelpful:0});dispatch({type:'ADD_REVIEW',payload:newReview});};const updateReview=(reviewId,updates)=>{const review=state.reviews.find(r=>r.id===reviewId);if(review){dispatch({type:'UPDATE_REVIEW',payload:_objectSpread(_objectSpread({},review),updates)});}};const deleteReview=reviewId=>{dispatch({type:'DELETE_REVIEW',payload:reviewId});};const getProductReviews=productId=>{return state.reviews.filter(review=>review.productId===productId.toString());};const getProductRating=productId=>{const productReviews=getProductReviews(productId);if(productReviews.length===0)return{average:0,count:0};const totalRating=productReviews.reduce((sum,review)=>sum+review.rating,0);const average=totalRating/productReviews.length;return{average:Math.round(average*10)/10,count:productReviews.length};};const markHelpful=(reviewId,isHelpful)=>{const review=state.reviews.find(r=>r.id===reviewId);if(review){const updates=isHelpful?{helpful:review.helpful+1}:{notHelpful:review.notHelpful+1};updateReview(reviewId,updates);}};const value={reviews:state.reviews,loading:state.loading,addReview,updateReview,deleteReview,getProductReviews,getProductRating,markHelpful};return/*#__PURE__*/_jsx(ReviewsContext.Provider,{value:value,children:children});};export const useReviews=()=>{const context=useContext(ReviewsContext);if(!context){throw new Error('useReviews must be used within a ReviewsProvider');}return context;};export default ReviewsContext;","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","jsx","_jsx","ReviewsContext","reviewsReducer","state","action","type","_objectSpread","reviews","payload","loading","newReviews","localStorage","setItem","JSON","stringify","updatedReviews","map","review","id","filteredReviews","filter","initialState","ReviewsProvider","_ref","children","dispatch","savedReviews","getItem","parsedReviews","parse","error","console","sampleReviews","productId","userId","userName","rating","title","comment","date","Date","toISOString","verified","helpful","notHelpful","now","addReview","newReview","updateReview","reviewId","updates","find","r","deleteReview","getProductReviews","toString","getProductRating","productReviews","length","average","count","totalRating","reduce","sum","Math","round","markHelpful","isHelpful","value","Provider","useReviews","context","Error"],"sources":["C:/Users/USER/OneDrive/Desktop/ecommerce/frontend/src/context/ReviewsContext.js"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect } from 'react';\r\n\r\nconst ReviewsContext = createContext();\r\n\r\nconst reviewsReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'LOAD_REVIEWS':\r\n      return {\r\n        ...state,\r\n        reviews: action.payload,\r\n        loading: false\r\n      };\r\n\r\n    case 'ADD_REVIEW':\r\n      const newReviews = [...state.reviews, action.payload];\r\n      localStorage.setItem('productReviews', JSON.stringify(newReviews));\r\n      return {\r\n        ...state,\r\n        reviews: newReviews\r\n      };\r\n\r\n    case 'UPDATE_REVIEW':\r\n      const updatedReviews = state.reviews.map(review =>\r\n        review.id === action.payload.id ? action.payload : review\r\n      );\r\n      localStorage.setItem('productReviews', JSON.stringify(updatedReviews));\r\n      return {\r\n        ...state,\r\n        reviews: updatedReviews\r\n      };\r\n\r\n    case 'DELETE_REVIEW':\r\n      const filteredReviews = state.reviews.filter(review => review.id !== action.payload);\r\n      localStorage.setItem('productReviews', JSON.stringify(filteredReviews));\r\n      return {\r\n        ...state,\r\n        reviews: filteredReviews\r\n      };\r\n\r\n    case 'SET_LOADING':\r\n      return {\r\n        ...state,\r\n        loading: action.payload\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst initialState = {\r\n  reviews: [],\r\n  loading: true\r\n};\r\n\r\nexport const ReviewsProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(reviewsReducer, initialState);\r\n\r\n  // Load reviews from localStorage on app start\r\n  useEffect(() => {\r\n    const savedReviews = localStorage.getItem('productReviews');\r\n    if (savedReviews) {\r\n      try {\r\n        const parsedReviews = JSON.parse(savedReviews);\r\n        dispatch({ type: 'LOAD_REVIEWS', payload: parsedReviews });\r\n      } catch (error) {\r\n        console.error('Error loading reviews:', error);\r\n        dispatch({ type: 'LOAD_REVIEWS', payload: [] });\r\n      }\r\n    } else {\r\n      // Initialize with sample reviews\r\n      const sampleReviews = [\r\n        {\r\n          id: 1,\r\n          productId: '1',\r\n          userId: 'user1',\r\n          userName: 'John Doe',\r\n          rating: 5,\r\n          title: 'Amazing quality!',\r\n          comment: 'This product exceeded my expectations. Great quality and fast delivery.',\r\n          date: new Date().toISOString(),\r\n          verified: true,\r\n          helpful: 12,\r\n          notHelpful: 1\r\n        },\r\n        {\r\n          id: 2,\r\n          productId: '1',\r\n          userId: 'user2',\r\n          userName: 'Sarah Wilson',\r\n          rating: 4,\r\n          title: 'Good value for money',\r\n          comment: 'Nice product overall. Good quality but took a while to arrive.',\r\n          date: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),\r\n          verified: true,\r\n          helpful: 8,\r\n          notHelpful: 0\r\n        }\r\n      ];\r\n      dispatch({ type: 'LOAD_REVIEWS', payload: sampleReviews });\r\n      localStorage.setItem('productReviews', JSON.stringify(sampleReviews));\r\n    }\r\n  }, []);\r\n\r\n  const addReview = (review) => {\r\n    const newReview = {\r\n      ...review,\r\n      id: Date.now(),\r\n      date: new Date().toISOString(),\r\n      helpful: 0,\r\n      notHelpful: 0\r\n    };\r\n    dispatch({ type: 'ADD_REVIEW', payload: newReview });\r\n  };\r\n\r\n  const updateReview = (reviewId, updates) => {\r\n    const review = state.reviews.find(r => r.id === reviewId);\r\n    if (review) {\r\n      dispatch({ type: 'UPDATE_REVIEW', payload: { ...review, ...updates } });\r\n    }\r\n  };\r\n\r\n  const deleteReview = (reviewId) => {\r\n    dispatch({ type: 'DELETE_REVIEW', payload: reviewId });\r\n  };\r\n\r\n  const getProductReviews = (productId) => {\r\n    return state.reviews.filter(review => review.productId === productId.toString());\r\n  };\r\n\r\n  const getProductRating = (productId) => {\r\n    const productReviews = getProductReviews(productId);\r\n    if (productReviews.length === 0) return { average: 0, count: 0 };\r\n    \r\n    const totalRating = productReviews.reduce((sum, review) => sum + review.rating, 0);\r\n    const average = totalRating / productReviews.length;\r\n    \r\n    return {\r\n      average: Math.round(average * 10) / 10,\r\n      count: productReviews.length\r\n    };\r\n  };\r\n\r\n  const markHelpful = (reviewId, isHelpful) => {\r\n    const review = state.reviews.find(r => r.id === reviewId);\r\n    if (review) {\r\n      const updates = isHelpful \r\n        ? { helpful: review.helpful + 1 }\r\n        : { notHelpful: review.notHelpful + 1 };\r\n      updateReview(reviewId, updates);\r\n    }\r\n  };\r\n\r\n  const value = {\r\n    reviews: state.reviews,\r\n    loading: state.loading,\r\n    addReview,\r\n    updateReview,\r\n    deleteReview,\r\n    getProductReviews,\r\n    getProductRating,\r\n    markHelpful\r\n  };\r\n\r\n  return (\r\n    <ReviewsContext.Provider value={value}>\r\n      {children}\r\n    </ReviewsContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useReviews = () => {\r\n  const context = useContext(ReviewsContext);\r\n  if (!context) {\r\n    throw new Error('useReviews must be used within a ReviewsProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport default ReviewsContext;"],"mappings":"sIAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,UAAU,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEhF,KAAM,CAAAC,cAAc,cAAGN,aAAa,CAAC,CAAC,CAEtC,KAAM,CAAAO,cAAc,CAAGA,CAACC,KAAK,CAAEC,MAAM,GAAK,CACxC,OAAQA,MAAM,CAACC,IAAI,EACjB,IAAK,cAAc,CACjB,OAAAC,aAAA,CAAAA,aAAA,IACKH,KAAK,MACRI,OAAO,CAAEH,MAAM,CAACI,OAAO,CACvBC,OAAO,CAAE,KAAK,GAGlB,IAAK,YAAY,CACf,KAAM,CAAAC,UAAU,CAAG,CAAC,GAAGP,KAAK,CAACI,OAAO,CAAEH,MAAM,CAACI,OAAO,CAAC,CACrDG,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAEC,IAAI,CAACC,SAAS,CAACJ,UAAU,CAAC,CAAC,CAClE,OAAAJ,aAAA,CAAAA,aAAA,IACKH,KAAK,MACRI,OAAO,CAAEG,UAAU,GAGvB,IAAK,eAAe,CAClB,KAAM,CAAAK,cAAc,CAAGZ,KAAK,CAACI,OAAO,CAACS,GAAG,CAACC,MAAM,EAC7CA,MAAM,CAACC,EAAE,GAAKd,MAAM,CAACI,OAAO,CAACU,EAAE,CAAGd,MAAM,CAACI,OAAO,CAAGS,MACrD,CAAC,CACDN,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAEC,IAAI,CAACC,SAAS,CAACC,cAAc,CAAC,CAAC,CACtE,OAAAT,aAAA,CAAAA,aAAA,IACKH,KAAK,MACRI,OAAO,CAAEQ,cAAc,GAG3B,IAAK,eAAe,CAClB,KAAM,CAAAI,eAAe,CAAGhB,KAAK,CAACI,OAAO,CAACa,MAAM,CAACH,MAAM,EAAIA,MAAM,CAACC,EAAE,GAAKd,MAAM,CAACI,OAAO,CAAC,CACpFG,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAEC,IAAI,CAACC,SAAS,CAACK,eAAe,CAAC,CAAC,CACvE,OAAAb,aAAA,CAAAA,aAAA,IACKH,KAAK,MACRI,OAAO,CAAEY,eAAe,GAG5B,IAAK,aAAa,CAChB,OAAAb,aAAA,CAAAA,aAAA,IACKH,KAAK,MACRM,OAAO,CAAEL,MAAM,CAACI,OAAO,GAG3B,QACE,MAAO,CAAAL,KAAK,CAChB,CACF,CAAC,CAED,KAAM,CAAAkB,YAAY,CAAG,CACnBd,OAAO,CAAE,EAAE,CACXE,OAAO,CAAE,IACX,CAAC,CAED,MAAO,MAAM,CAAAa,eAAe,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC1C,KAAM,CAACpB,KAAK,CAAEsB,QAAQ,CAAC,CAAG5B,UAAU,CAACK,cAAc,CAAEmB,YAAY,CAAC,CAElE;AACAvB,SAAS,CAAC,IAAM,CACd,KAAM,CAAA4B,YAAY,CAAGf,YAAY,CAACgB,OAAO,CAAC,gBAAgB,CAAC,CAC3D,GAAID,YAAY,CAAE,CAChB,GAAI,CACF,KAAM,CAAAE,aAAa,CAAGf,IAAI,CAACgB,KAAK,CAACH,YAAY,CAAC,CAC9CD,QAAQ,CAAC,CAAEpB,IAAI,CAAE,cAAc,CAAEG,OAAO,CAAEoB,aAAc,CAAC,CAAC,CAC5D,CAAE,MAAOE,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAC9CL,QAAQ,CAAC,CAAEpB,IAAI,CAAE,cAAc,CAAEG,OAAO,CAAE,EAAG,CAAC,CAAC,CACjD,CACF,CAAC,IAAM,CACL;AACA,KAAM,CAAAwB,aAAa,CAAG,CACpB,CACEd,EAAE,CAAE,CAAC,CACLe,SAAS,CAAE,GAAG,CACdC,MAAM,CAAE,OAAO,CACfC,QAAQ,CAAE,UAAU,CACpBC,MAAM,CAAE,CAAC,CACTC,KAAK,CAAE,kBAAkB,CACzBC,OAAO,CAAE,yEAAyE,CAClFC,IAAI,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAC9BC,QAAQ,CAAE,IAAI,CACdC,OAAO,CAAE,EAAE,CACXC,UAAU,CAAE,CACd,CAAC,CACD,CACE1B,EAAE,CAAE,CAAC,CACLe,SAAS,CAAE,GAAG,CACdC,MAAM,CAAE,OAAO,CACfC,QAAQ,CAAE,cAAc,CACxBC,MAAM,CAAE,CAAC,CACTC,KAAK,CAAE,sBAAsB,CAC7BC,OAAO,CAAE,gEAAgE,CACzEC,IAAI,CAAE,GAAI,CAAAC,IAAI,CAACA,IAAI,CAACK,GAAG,CAAC,CAAC,CAAG,CAAC,CAAG,EAAE,CAAG,EAAE,CAAG,EAAE,CAAG,IAAI,CAAC,CAACJ,WAAW,CAAC,CAAC,CAClEC,QAAQ,CAAE,IAAI,CACdC,OAAO,CAAE,CAAC,CACVC,UAAU,CAAE,CACd,CAAC,CACF,CACDnB,QAAQ,CAAC,CAAEpB,IAAI,CAAE,cAAc,CAAEG,OAAO,CAAEwB,aAAc,CAAC,CAAC,CAC1DrB,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAEC,IAAI,CAACC,SAAS,CAACkB,aAAa,CAAC,CAAC,CACvE,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAc,SAAS,CAAI7B,MAAM,EAAK,CAC5B,KAAM,CAAA8B,SAAS,CAAAzC,aAAA,CAAAA,aAAA,IACVW,MAAM,MACTC,EAAE,CAAEsB,IAAI,CAACK,GAAG,CAAC,CAAC,CACdN,IAAI,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAC9BE,OAAO,CAAE,CAAC,CACVC,UAAU,CAAE,CAAC,EACd,CACDnB,QAAQ,CAAC,CAAEpB,IAAI,CAAE,YAAY,CAAEG,OAAO,CAAEuC,SAAU,CAAC,CAAC,CACtD,CAAC,CAED,KAAM,CAAAC,YAAY,CAAGA,CAACC,QAAQ,CAAEC,OAAO,GAAK,CAC1C,KAAM,CAAAjC,MAAM,CAAGd,KAAK,CAACI,OAAO,CAAC4C,IAAI,CAACC,CAAC,EAAIA,CAAC,CAAClC,EAAE,GAAK+B,QAAQ,CAAC,CACzD,GAAIhC,MAAM,CAAE,CACVQ,QAAQ,CAAC,CAAEpB,IAAI,CAAE,eAAe,CAAEG,OAAO,CAAAF,aAAA,CAAAA,aAAA,IAAOW,MAAM,EAAKiC,OAAO,CAAG,CAAC,CAAC,CACzE,CACF,CAAC,CAED,KAAM,CAAAG,YAAY,CAAIJ,QAAQ,EAAK,CACjCxB,QAAQ,CAAC,CAAEpB,IAAI,CAAE,eAAe,CAAEG,OAAO,CAAEyC,QAAS,CAAC,CAAC,CACxD,CAAC,CAED,KAAM,CAAAK,iBAAiB,CAAIrB,SAAS,EAAK,CACvC,MAAO,CAAA9B,KAAK,CAACI,OAAO,CAACa,MAAM,CAACH,MAAM,EAAIA,MAAM,CAACgB,SAAS,GAAKA,SAAS,CAACsB,QAAQ,CAAC,CAAC,CAAC,CAClF,CAAC,CAED,KAAM,CAAAC,gBAAgB,CAAIvB,SAAS,EAAK,CACtC,KAAM,CAAAwB,cAAc,CAAGH,iBAAiB,CAACrB,SAAS,CAAC,CACnD,GAAIwB,cAAc,CAACC,MAAM,GAAK,CAAC,CAAE,MAAO,CAAEC,OAAO,CAAE,CAAC,CAAEC,KAAK,CAAE,CAAE,CAAC,CAEhE,KAAM,CAAAC,WAAW,CAAGJ,cAAc,CAACK,MAAM,CAAC,CAACC,GAAG,CAAE9C,MAAM,GAAK8C,GAAG,CAAG9C,MAAM,CAACmB,MAAM,CAAE,CAAC,CAAC,CAClF,KAAM,CAAAuB,OAAO,CAAGE,WAAW,CAAGJ,cAAc,CAACC,MAAM,CAEnD,MAAO,CACLC,OAAO,CAAEK,IAAI,CAACC,KAAK,CAACN,OAAO,CAAG,EAAE,CAAC,CAAG,EAAE,CACtCC,KAAK,CAAEH,cAAc,CAACC,MACxB,CAAC,CACH,CAAC,CAED,KAAM,CAAAQ,WAAW,CAAGA,CAACjB,QAAQ,CAAEkB,SAAS,GAAK,CAC3C,KAAM,CAAAlD,MAAM,CAAGd,KAAK,CAACI,OAAO,CAAC4C,IAAI,CAACC,CAAC,EAAIA,CAAC,CAAClC,EAAE,GAAK+B,QAAQ,CAAC,CACzD,GAAIhC,MAAM,CAAE,CACV,KAAM,CAAAiC,OAAO,CAAGiB,SAAS,CACrB,CAAExB,OAAO,CAAE1B,MAAM,CAAC0B,OAAO,CAAG,CAAE,CAAC,CAC/B,CAAEC,UAAU,CAAE3B,MAAM,CAAC2B,UAAU,CAAG,CAAE,CAAC,CACzCI,YAAY,CAACC,QAAQ,CAAEC,OAAO,CAAC,CACjC,CACF,CAAC,CAED,KAAM,CAAAkB,KAAK,CAAG,CACZ7D,OAAO,CAAEJ,KAAK,CAACI,OAAO,CACtBE,OAAO,CAAEN,KAAK,CAACM,OAAO,CACtBqC,SAAS,CACTE,YAAY,CACZK,YAAY,CACZC,iBAAiB,CACjBE,gBAAgB,CAChBU,WACF,CAAC,CAED,mBACElE,IAAA,CAACC,cAAc,CAACoE,QAAQ,EAACD,KAAK,CAAEA,KAAM,CAAA5C,QAAA,CACnCA,QAAQ,CACc,CAAC,CAE9B,CAAC,CAED,MAAO,MAAM,CAAA8C,UAAU,CAAGA,CAAA,GAAM,CAC9B,KAAM,CAAAC,OAAO,CAAG3E,UAAU,CAACK,cAAc,CAAC,CAC1C,GAAI,CAACsE,OAAO,CAAE,CACZ,KAAM,IAAI,CAAAC,KAAK,CAAC,kDAAkD,CAAC,CACrE,CACA,MAAO,CAAAD,OAAO,CAChB,CAAC,CAED,cAAe,CAAAtE,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}