{"ast":null,"code":"import _objectSpread from\"C:/Users/USER/OneDrive/Desktop/ecommerce/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useReducer,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const ComparisonContext=/*#__PURE__*/createContext();const comparisonReducer=(state,action)=>{switch(action.type){case'LOAD_COMPARISON':return _objectSpread(_objectSpread({},state),{},{items:action.payload,loading:false});case'ADD_TO_COMPARISON':const newItem=action.payload;const existingItem=state.items.find(item=>item.id===newItem.id);if(existingItem){return state;// Item already in comparison\n}// Limit to maximum 4 products for comparison\nlet updatedItems;if(state.items.length>=4){// Replace the oldest item (first in array)\nupdatedItems=[...state.items.slice(1),_objectSpread(_objectSpread({},newItem),{},{addedAt:new Date().toISOString()})];}else{updatedItems=[...state.items,_objectSpread(_objectSpread({},newItem),{},{addedAt:new Date().toISOString()})];}localStorage.setItem('comparison',JSON.stringify(updatedItems));return _objectSpread(_objectSpread({},state),{},{items:updatedItems});case'REMOVE_FROM_COMPARISON':const filteredItems=state.items.filter(item=>item.id!==action.payload);localStorage.setItem('comparison',JSON.stringify(filteredItems));return _objectSpread(_objectSpread({},state),{},{items:filteredItems});case'CLEAR_COMPARISON':localStorage.removeItem('comparison');return _objectSpread(_objectSpread({},state),{},{items:[]});case'REORDER_COMPARISON':const{fromIndex,toIndex}=action.payload;const reorderedItems=[...state.items];const[movedItem]=reorderedItems.splice(fromIndex,1);reorderedItems.splice(toIndex,0,movedItem);localStorage.setItem('comparison',JSON.stringify(reorderedItems));return _objectSpread(_objectSpread({},state),{},{items:reorderedItems});default:return state;}};const initialState={items:[],loading:true};export const ComparisonProvider=_ref=>{let{children}=_ref;const[state,dispatch]=useReducer(comparisonReducer,initialState);// Load comparison from localStorage on app start\nuseEffect(()=>{const savedComparison=localStorage.getItem('comparison');if(savedComparison){try{const parsedComparison=JSON.parse(savedComparison);dispatch({type:'LOAD_COMPARISON',payload:parsedComparison});}catch(error){console.error('Error loading comparison:',error);dispatch({type:'LOAD_COMPARISON',payload:[]});}}else{dispatch({type:'LOAD_COMPARISON',payload:[]});}},[]);const addToComparison=product=>{if(!product||!product.id){console.warn('ComparisonContext: Cannot add invalid product to comparison:',product);return false;}const wasAdded=state.items.length<4||!state.items.find(item=>item.id===product.id);dispatch({type:'ADD_TO_COMPARISON',payload:product});return wasAdded;};const removeFromComparison=productId=>{if(!productId){console.warn('ComparisonContext: Cannot remove product without ID:',productId);return;}dispatch({type:'REMOVE_FROM_COMPARISON',payload:productId});};const clearComparison=()=>{dispatch({type:'CLEAR_COMPARISON'});};const reorderComparison=(fromIndex,toIndex)=>{if(fromIndex<0||toIndex<0||fromIndex>=state.items.length||toIndex>=state.items.length){return;}dispatch({type:'REORDER_COMPARISON',payload:{fromIndex,toIndex}});};const isInComparison=productId=>{if(!productId){return false;}return state.items.some(item=>item.id===productId);};const getComparisonCount=()=>{return state.items.length;};const canAddToComparison=()=>{return state.items.length<4;};const getComparisonCategories=()=>{const categories=new Set();state.items.forEach(item=>{if(item.category){categories.add(item.category);}});return Array.from(categories);};const value={items:state.items,loading:state.loading,addToComparison,removeFromComparison,clearComparison,reorderComparison,isInComparison,getComparisonCount,canAddToComparison,getComparisonCategories};return/*#__PURE__*/_jsx(ComparisonContext.Provider,{value:value,children:children});};export const useComparison=()=>{const context=useContext(ComparisonContext);if(context===undefined){throw new Error('useComparison must be used within a ComparisonProvider');}return context;};export default ComparisonContext;","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","jsx","_jsx","ComparisonContext","comparisonReducer","state","action","type","_objectSpread","items","payload","loading","newItem","existingItem","find","item","id","updatedItems","length","slice","addedAt","Date","toISOString","localStorage","setItem","JSON","stringify","filteredItems","filter","removeItem","fromIndex","toIndex","reorderedItems","movedItem","splice","initialState","ComparisonProvider","_ref","children","dispatch","savedComparison","getItem","parsedComparison","parse","error","console","addToComparison","product","warn","wasAdded","removeFromComparison","productId","clearComparison","reorderComparison","isInComparison","some","getComparisonCount","canAddToComparison","getComparisonCategories","categories","Set","forEach","category","add","Array","from","value","Provider","useComparison","context","undefined","Error"],"sources":["C:/Users/USER/OneDrive/Desktop/ecommerce/frontend/src/context/ComparisonContext.js"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect } from 'react';\r\n\r\nconst ComparisonContext = createContext();\r\n\r\nconst comparisonReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'LOAD_COMPARISON':\r\n      return {\r\n        ...state,\r\n        items: action.payload,\r\n        loading: false\r\n      };\r\n\r\n    case 'ADD_TO_COMPARISON':\r\n      const newItem = action.payload;\r\n      const existingItem = state.items.find(item => item.id === newItem.id);\r\n      \r\n      if (existingItem) {\r\n        return state; // Item already in comparison\r\n      }\r\n\r\n      // Limit to maximum 4 products for comparison\r\n      let updatedItems;\r\n      if (state.items.length >= 4) {\r\n        // Replace the oldest item (first in array)\r\n        updatedItems = [...state.items.slice(1), { ...newItem, addedAt: new Date().toISOString() }];\r\n      } else {\r\n        updatedItems = [...state.items, { ...newItem, addedAt: new Date().toISOString() }];\r\n      }\r\n      \r\n      localStorage.setItem('comparison', JSON.stringify(updatedItems));\r\n      \r\n      return {\r\n        ...state,\r\n        items: updatedItems\r\n      };\r\n\r\n    case 'REMOVE_FROM_COMPARISON':\r\n      const filteredItems = state.items.filter(item => item.id !== action.payload);\r\n      localStorage.setItem('comparison', JSON.stringify(filteredItems));\r\n      \r\n      return {\r\n        ...state,\r\n        items: filteredItems\r\n      };\r\n\r\n    case 'CLEAR_COMPARISON':\r\n      localStorage.removeItem('comparison');\r\n      return {\r\n        ...state,\r\n        items: []\r\n      };\r\n\r\n    case 'REORDER_COMPARISON':\r\n      const { fromIndex, toIndex } = action.payload;\r\n      const reorderedItems = [...state.items];\r\n      const [movedItem] = reorderedItems.splice(fromIndex, 1);\r\n      reorderedItems.splice(toIndex, 0, movedItem);\r\n      \r\n      localStorage.setItem('comparison', JSON.stringify(reorderedItems));\r\n      \r\n      return {\r\n        ...state,\r\n        items: reorderedItems\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst initialState = {\r\n  items: [],\r\n  loading: true\r\n};\r\n\r\nexport const ComparisonProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(comparisonReducer, initialState);\r\n\r\n  // Load comparison from localStorage on app start\r\n  useEffect(() => {\r\n    const savedComparison = localStorage.getItem('comparison');\r\n    if (savedComparison) {\r\n      try {\r\n        const parsedComparison = JSON.parse(savedComparison);\r\n        dispatch({ type: 'LOAD_COMPARISON', payload: parsedComparison });\r\n      } catch (error) {\r\n        console.error('Error loading comparison:', error);\r\n        dispatch({ type: 'LOAD_COMPARISON', payload: [] });\r\n      }\r\n    } else {\r\n      dispatch({ type: 'LOAD_COMPARISON', payload: [] });\r\n    }\r\n  }, []);\r\n\r\n  const addToComparison = (product) => {\r\n    if (!product || !product.id) {\r\n      console.warn('ComparisonContext: Cannot add invalid product to comparison:', product);\r\n      return false;\r\n    }\r\n    \r\n    const wasAdded = state.items.length < 4 || !state.items.find(item => item.id === product.id);\r\n    dispatch({ type: 'ADD_TO_COMPARISON', payload: product });\r\n    return wasAdded;\r\n  };\r\n\r\n  const removeFromComparison = (productId) => {\r\n    if (!productId) {\r\n      console.warn('ComparisonContext: Cannot remove product without ID:', productId);\r\n      return;\r\n    }\r\n    dispatch({ type: 'REMOVE_FROM_COMPARISON', payload: productId });\r\n  };\r\n\r\n  const clearComparison = () => {\r\n    dispatch({ type: 'CLEAR_COMPARISON' });\r\n  };\r\n\r\n  const reorderComparison = (fromIndex, toIndex) => {\r\n    if (fromIndex < 0 || toIndex < 0 || fromIndex >= state.items.length || toIndex >= state.items.length) {\r\n      return;\r\n    }\r\n    dispatch({ type: 'REORDER_COMPARISON', payload: { fromIndex, toIndex } });\r\n  };\r\n\r\n  const isInComparison = (productId) => {\r\n    if (!productId) {\r\n      return false;\r\n    }\r\n    return state.items.some(item => item.id === productId);\r\n  };\r\n\r\n  const getComparisonCount = () => {\r\n    return state.items.length;\r\n  };\r\n\r\n  const canAddToComparison = () => {\r\n    return state.items.length < 4;\r\n  };\r\n\r\n  const getComparisonCategories = () => {\r\n    const categories = new Set();\r\n    state.items.forEach(item => {\r\n      if (item.category) {\r\n        categories.add(item.category);\r\n      }\r\n    });\r\n    return Array.from(categories);\r\n  };\r\n\r\n  const value = {\r\n    items: state.items,\r\n    loading: state.loading,\r\n    addToComparison,\r\n    removeFromComparison,\r\n    clearComparison,\r\n    reorderComparison,\r\n    isInComparison,\r\n    getComparisonCount,\r\n    canAddToComparison,\r\n    getComparisonCategories\r\n  };\r\n\r\n  return (\r\n    <ComparisonContext.Provider value={value}>\r\n      {children}\r\n    </ComparisonContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useComparison = () => {\r\n  const context = useContext(ComparisonContext);\r\n  if (context === undefined) {\r\n    throw new Error('useComparison must be used within a ComparisonProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport default ComparisonContext;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}