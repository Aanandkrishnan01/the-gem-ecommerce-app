{"ast":null,"code":"import _objectSpread from\"C:/Users/USER/OneDrive/Desktop/ecommerce/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useReducer,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const WishlistContext=/*#__PURE__*/createContext();const wishlistReducer=(state,action)=>{switch(action.type){case'LOAD_WISHLIST':return _objectSpread(_objectSpread({},state),{},{items:action.payload,loading:false});case'ADD_TO_WISHLIST':const newItem=action.payload;const existingItem=state.items.find(item=>item.id===newItem.id);if(existingItem){return state;// Item already in wishlist\n}const updatedItems=[...state.items,_objectSpread(_objectSpread({},newItem),{},{addedAt:new Date().toISOString()})];localStorage.setItem('wishlist',JSON.stringify(updatedItems));return _objectSpread(_objectSpread({},state),{},{items:updatedItems});case'REMOVE_FROM_WISHLIST':const filteredItems=state.items.filter(item=>item.id!==action.payload);localStorage.setItem('wishlist',JSON.stringify(filteredItems));return _objectSpread(_objectSpread({},state),{},{items:filteredItems});case'CLEAR_WISHLIST':localStorage.removeItem('wishlist');return _objectSpread(_objectSpread({},state),{},{items:[]});case'MOVE_TO_CART':// This will be handled by the cart context, we just remove from wishlist\nconst remainingItems=state.items.filter(item=>item.id!==action.payload);localStorage.setItem('wishlist',JSON.stringify(remainingItems));return _objectSpread(_objectSpread({},state),{},{items:remainingItems});default:return state;}};const initialState={items:[],loading:true};export const WishlistProvider=_ref=>{let{children}=_ref;const[state,dispatch]=useReducer(wishlistReducer,initialState);// Load wishlist from localStorage on app start\nuseEffect(()=>{const savedWishlist=localStorage.getItem('wishlist');if(savedWishlist){try{const parsedWishlist=JSON.parse(savedWishlist);dispatch({type:'LOAD_WISHLIST',payload:parsedWishlist});}catch(error){console.error('Error loading wishlist:',error);dispatch({type:'LOAD_WISHLIST',payload:[]});}}else{dispatch({type:'LOAD_WISHLIST',payload:[]});}},[]);const addToWishlist=product=>{if(!product||!product.id){console.warn('WishlistContext: Cannot add invalid product to wishlist:',product);return;}dispatch({type:'ADD_TO_WISHLIST',payload:product});};const removeFromWishlist=productId=>{if(!productId){console.warn('WishlistContext: Cannot remove product without ID:',productId);return;}dispatch({type:'REMOVE_FROM_WISHLIST',payload:productId});};const clearWishlist=()=>{dispatch({type:'CLEAR_WISHLIST'});};const moveToCart=(productId,addToCartFunction)=>{const item=state.items.find(item=>item.id===productId);if(item&&addToCartFunction){addToCartFunction(item);dispatch({type:'MOVE_TO_CART',payload:productId});}};const isInWishlist=productId=>{if(!productId){return false;}return state.items.some(item=>item.id===productId);};const getWishlistCount=()=>{return state.items.length;};const value={items:state.items,loading:state.loading,addToWishlist,removeFromWishlist,clearWishlist,moveToCart,isInWishlist,getWishlistCount};return/*#__PURE__*/_jsx(WishlistContext.Provider,{value:value,children:children});};export const useWishlist=()=>{const context=useContext(WishlistContext);if(!context){throw new Error('useWishlist must be used within a WishlistProvider');}return context;};export default WishlistContext;","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","jsx","_jsx","WishlistContext","wishlistReducer","state","action","type","_objectSpread","items","payload","loading","newItem","existingItem","find","item","id","updatedItems","addedAt","Date","toISOString","localStorage","setItem","JSON","stringify","filteredItems","filter","removeItem","remainingItems","initialState","WishlistProvider","_ref","children","dispatch","savedWishlist","getItem","parsedWishlist","parse","error","console","addToWishlist","product","warn","removeFromWishlist","productId","clearWishlist","moveToCart","addToCartFunction","isInWishlist","some","getWishlistCount","length","value","Provider","useWishlist","context","Error"],"sources":["C:/Users/USER/OneDrive/Desktop/ecommerce/frontend/src/context/WishlistContext.js"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect } from 'react';\r\n\r\nconst WishlistContext = createContext();\r\n\r\nconst wishlistReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'LOAD_WISHLIST':\r\n      return {\r\n        ...state,\r\n        items: action.payload,\r\n        loading: false\r\n      };\r\n\r\n    case 'ADD_TO_WISHLIST':\r\n      const newItem = action.payload;\r\n      const existingItem = state.items.find(item => item.id === newItem.id);\r\n      \r\n      if (existingItem) {\r\n        return state; // Item already in wishlist\r\n      }\r\n      \r\n      const updatedItems = [...state.items, { ...newItem, addedAt: new Date().toISOString() }];\r\n      localStorage.setItem('wishlist', JSON.stringify(updatedItems));\r\n      \r\n      return {\r\n        ...state,\r\n        items: updatedItems\r\n      };\r\n\r\n    case 'REMOVE_FROM_WISHLIST':\r\n      const filteredItems = state.items.filter(item => item.id !== action.payload);\r\n      localStorage.setItem('wishlist', JSON.stringify(filteredItems));\r\n      \r\n      return {\r\n        ...state,\r\n        items: filteredItems\r\n      };\r\n\r\n    case 'CLEAR_WISHLIST':\r\n      localStorage.removeItem('wishlist');\r\n      return {\r\n        ...state,\r\n        items: []\r\n      };\r\n\r\n    case 'MOVE_TO_CART':\r\n      // This will be handled by the cart context, we just remove from wishlist\r\n      const remainingItems = state.items.filter(item => item.id !== action.payload);\r\n      localStorage.setItem('wishlist', JSON.stringify(remainingItems));\r\n      \r\n      return {\r\n        ...state,\r\n        items: remainingItems\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst initialState = {\r\n  items: [],\r\n  loading: true\r\n};\r\n\r\nexport const WishlistProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(wishlistReducer, initialState);\r\n\r\n  // Load wishlist from localStorage on app start\r\n  useEffect(() => {\r\n    const savedWishlist = localStorage.getItem('wishlist');\r\n    if (savedWishlist) {\r\n      try {\r\n        const parsedWishlist = JSON.parse(savedWishlist);\r\n        dispatch({ type: 'LOAD_WISHLIST', payload: parsedWishlist });\r\n      } catch (error) {\r\n        console.error('Error loading wishlist:', error);\r\n        dispatch({ type: 'LOAD_WISHLIST', payload: [] });\r\n      }\r\n    } else {\r\n      dispatch({ type: 'LOAD_WISHLIST', payload: [] });\r\n    }\r\n  }, []);\r\n\r\n  const addToWishlist = (product) => {\r\n    if (!product || !product.id) {\r\n      console.warn('WishlistContext: Cannot add invalid product to wishlist:', product);\r\n      return;\r\n    }\r\n    dispatch({ type: 'ADD_TO_WISHLIST', payload: product });\r\n  };\r\n\r\n  const removeFromWishlist = (productId) => {\r\n    if (!productId) {\r\n      console.warn('WishlistContext: Cannot remove product without ID:', productId);\r\n      return;\r\n    }\r\n    dispatch({ type: 'REMOVE_FROM_WISHLIST', payload: productId });\r\n  };\r\n\r\n  const clearWishlist = () => {\r\n    dispatch({ type: 'CLEAR_WISHLIST' });\r\n  };\r\n\r\n  const moveToCart = (productId, addToCartFunction) => {\r\n    const item = state.items.find(item => item.id === productId);\r\n    if (item && addToCartFunction) {\r\n      addToCartFunction(item);\r\n      dispatch({ type: 'MOVE_TO_CART', payload: productId });\r\n    }\r\n  };\r\n\r\n  const isInWishlist = (productId) => {\r\n    if (!productId) {\r\n      return false;\r\n    }\r\n    return state.items.some(item => item.id === productId);\r\n  };\r\n\r\n  const getWishlistCount = () => {\r\n    return state.items.length;\r\n  };\r\n\r\n  const value = {\r\n    items: state.items,\r\n    loading: state.loading,\r\n    addToWishlist,\r\n    removeFromWishlist,\r\n    clearWishlist,\r\n    moveToCart,\r\n    isInWishlist,\r\n    getWishlistCount\r\n  };\r\n\r\n  return (\r\n    <WishlistContext.Provider value={value}>\r\n      {children}\r\n    </WishlistContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useWishlist = () => {\r\n  const context = useContext(WishlistContext);\r\n  if (!context) {\r\n    throw new Error('useWishlist must be used within a WishlistProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport default WishlistContext;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}