{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\ecommerce\\\\frontend\\\\src\\\\context\\\\SearchContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport localProductService from '../services/localProductService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SearchContext = /*#__PURE__*/createContext();\nexport const useSearch = () => {\n  _s();\n  const context = useContext(SearchContext);\n  if (!context) {\n    throw new Error('useSearch must be used within a SearchProvider');\n  }\n  return context;\n};\n_s(useSearch, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const SearchProvider = ({\n  children\n}) => {\n  _s2();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [searchSuggestions, setSuggestions] = useState([]);\n  const [recentSearches, setRecentSearches] = useState([]);\n  const [isSearching, setIsSearching] = useState(false);\n  const [filters, setFilters] = useState({\n    category: '',\n    priceRange: [0, 1000],\n    brand: '',\n    size: '',\n    color: '',\n    rating: 0,\n    inStock: false,\n    onSale: false\n  });\n  const [sortBy, setSortBy] = useState('relevance');\n  const [showFilters, setShowFilters] = useState(false);\n\n  // Available filter options\n  const [filterOptions, setFilterOptions] = useState({\n    categories: [],\n    brands: [],\n    sizes: [],\n    colors: [],\n    priceRanges: [{\n      label: 'Under $25',\n      min: 0,\n      max: 25\n    }, {\n      label: '$25 - $50',\n      min: 25,\n      max: 50\n    }, {\n      label: '$50 - $100',\n      min: 50,\n      max: 100\n    }, {\n      label: '$100 - $200',\n      min: 100,\n      max: 200\n    }, {\n      label: 'Over $200',\n      min: 200,\n      max: 1000\n    }]\n  });\n\n  // Sort options\n  const sortOptions = [{\n    value: 'relevance',\n    label: 'Best Match'\n  }, {\n    value: 'price_low',\n    label: 'Price: Low to High'\n  }, {\n    value: 'price_high',\n    label: 'Price: High to Low'\n  }, {\n    value: 'rating',\n    label: 'Customer Rating'\n  }, {\n    value: 'newest',\n    label: 'Newest First'\n  }, {\n    value: 'popular',\n    label: 'Most Popular'\n  }, {\n    value: 'name_asc',\n    label: 'Name: A to Z'\n  }, {\n    value: 'name_desc',\n    label: 'Name: Z to A'\n  }];\n\n  // Load recent searches from localStorage\n  useEffect(() => {\n    const savedSearches = localStorage.getItem('recentSearches');\n    if (savedSearches) {\n      setRecentSearches(JSON.parse(savedSearches));\n    }\n  }, []);\n\n  // Load filter options from products\n  useEffect(() => {\n    const loadFilterOptions = async () => {\n      try {\n        const products = await localProductService.getAllProducts();\n        const categories = [...new Set(products.map(p => p.category))];\n        const brands = [...new Set(products.map(p => p.brand).filter(Boolean))];\n        const sizes = [...new Set(products.flatMap(p => p.sizes || []))];\n        const colors = [...new Set(products.flatMap(p => p.colors || []))];\n        setFilterOptions(prev => ({\n          ...prev,\n          categories,\n          brands,\n          sizes,\n          colors\n        }));\n      } catch (error) {\n        console.error('Error loading filter options:', error);\n      }\n    };\n    loadFilterOptions();\n  }, []);\n\n  // Perform search with debouncing\n  useEffect(() => {\n    const debounceTimer = setTimeout(() => {\n      if (searchQuery.trim()) {\n        performSearch(searchQuery);\n      } else {\n        setSearchResults([]);\n        setSuggestions([]);\n      }\n    }, 300);\n    return () => clearTimeout(debounceTimer);\n  }, [searchQuery, filters, sortBy]);\n\n  // Generate search suggestions\n  useEffect(() => {\n    const generateSuggestions = async () => {\n      if (searchQuery.length >= 2) {\n        try {\n          const products = await localProductService.getAllProducts();\n          const suggestions = [];\n\n          // Product name suggestions\n          products.forEach(product => {\n            if (product.name.toLowerCase().includes(searchQuery.toLowerCase())) {\n              suggestions.push({\n                type: 'product',\n                text: product.name,\n                category: product.category,\n                id: product.id\n              });\n            }\n          });\n\n          // Category suggestions\n          filterOptions.categories.forEach(category => {\n            if (category.toLowerCase().includes(searchQuery.toLowerCase())) {\n              suggestions.push({\n                type: 'category',\n                text: category,\n                category: category\n              });\n            }\n          });\n\n          // Brand suggestions\n          filterOptions.brands.forEach(brand => {\n            if (brand.toLowerCase().includes(searchQuery.toLowerCase())) {\n              suggestions.push({\n                type: 'brand',\n                text: brand,\n                category: 'brand'\n              });\n            }\n          });\n          setSuggestions(suggestions.slice(0, 8));\n        } catch (error) {\n          console.error('Error generating suggestions:', error);\n        }\n      } else {\n        setSuggestions([]);\n      }\n    };\n    const debounceTimer = setTimeout(generateSuggestions, 200);\n    return () => clearTimeout(debounceTimer);\n  }, [searchQuery, filterOptions]);\n  const performSearch = async query => {\n    setIsSearching(true);\n    try {\n      const products = await localProductService.getAllProducts();\n\n      // Validate products array\n      if (!Array.isArray(products)) {\n        console.warn('Products is not an array:', products);\n        setSearchResults([]);\n        return;\n      }\n      let results = [...products]; // Create a copy to avoid mutations\n\n      // Text search with better error handling\n      if (query && query.trim()) {\n        const searchTerms = query.toLowerCase().split(' ').filter(term => term.length > 0);\n        results = results.filter(product => {\n          try {\n            // Safely build searchable text with null checks\n            const name = (product === null || product === void 0 ? void 0 : product.name) || '';\n            const description = (product === null || product === void 0 ? void 0 : product.description) || '';\n            const category = (product === null || product === void 0 ? void 0 : product.category) || '';\n            const brand = (product === null || product === void 0 ? void 0 : product.brand) || '';\n            const tags = Array.isArray(product === null || product === void 0 ? void 0 : product.tags) ? product.tags.join(' ') : '';\n            const searchableText = `${name} ${description} ${category} ${brand} ${tags}`.toLowerCase();\n            return searchTerms.every(term => searchableText.includes(term));\n          } catch (filterError) {\n            console.warn('Error filtering product:', product, filterError);\n            return false;\n          }\n        });\n      }\n\n      // Apply filters with null checks\n      if (filters.category) {\n        results = results.filter(p => (p === null || p === void 0 ? void 0 : p.category) === filters.category);\n      }\n      if (filters.brand) {\n        results = results.filter(p => (p === null || p === void 0 ? void 0 : p.brand) === filters.brand);\n      }\n      if (filters.size) {\n        results = results.filter(p => Array.isArray(p === null || p === void 0 ? void 0 : p.sizes) && p.sizes.includes(filters.size));\n      }\n      if (filters.color) {\n        results = results.filter(p => Array.isArray(p === null || p === void 0 ? void 0 : p.colors) && p.colors.includes(filters.color));\n      }\n      if (filters.rating > 0) {\n        results = results.filter(p => {\n          var _p$rating;\n          return (p === null || p === void 0 ? void 0 : (_p$rating = p.rating) === null || _p$rating === void 0 ? void 0 : _p$rating.average) && p.rating.average >= filters.rating;\n        });\n      }\n      if (filters.inStock) {\n        results = results.filter(p => (p === null || p === void 0 ? void 0 : p.inStock) === true);\n      }\n      if (filters.onSale) {\n        results = results.filter(p => (p === null || p === void 0 ? void 0 : p.originalPrice) && (p === null || p === void 0 ? void 0 : p.price) && p.originalPrice > p.price);\n      }\n\n      // Price range filter with null checks\n      if (Array.isArray(filters.priceRange) && filters.priceRange.length === 2) {\n        results = results.filter(p => {\n          const price = parseFloat(p === null || p === void 0 ? void 0 : p.price);\n          return !isNaN(price) && price >= filters.priceRange[0] && price <= filters.priceRange[1];\n        });\n      }\n\n      // Apply sorting\n      results = sortResults(results, sortBy);\n      setSearchResults(results || []);\n\n      // Save search to recent searches\n      if (query && query.trim()) {\n        saveRecentSearch(query.trim());\n      }\n    } catch (error) {\n      console.error('Search error:', error);\n      setSearchResults([]);\n    } finally {\n      setIsSearching(false);\n    }\n  };\n  const sortResults = (results, sortType) => {\n    if (!Array.isArray(results)) {\n      console.warn('sortResults received invalid results:', results);\n      return [];\n    }\n    const sortedResults = [...results];\n    try {\n      switch (sortType) {\n        case 'price_low':\n          return sortedResults.sort((a, b) => {\n            const priceA = parseFloat(a === null || a === void 0 ? void 0 : a.price) || 0;\n            const priceB = parseFloat(b === null || b === void 0 ? void 0 : b.price) || 0;\n            return priceA - priceB;\n          });\n        case 'price_high':\n          return sortedResults.sort((a, b) => {\n            const priceA = parseFloat(a === null || a === void 0 ? void 0 : a.price) || 0;\n            const priceB = parseFloat(b === null || b === void 0 ? void 0 : b.price) || 0;\n            return priceB - priceA;\n          });\n        case 'rating':\n          return sortedResults.sort((a, b) => {\n            var _a$rating, _b$rating;\n            const ratingA = (a === null || a === void 0 ? void 0 : (_a$rating = a.rating) === null || _a$rating === void 0 ? void 0 : _a$rating.average) || 0;\n            const ratingB = (b === null || b === void 0 ? void 0 : (_b$rating = b.rating) === null || _b$rating === void 0 ? void 0 : _b$rating.average) || 0;\n            return ratingB - ratingA;\n          });\n        case 'newest':\n          return sortedResults.sort((a, b) => {\n            const dateA = new Date((a === null || a === void 0 ? void 0 : a.createdAt) || 0);\n            const dateB = new Date((b === null || b === void 0 ? void 0 : b.createdAt) || 0);\n            return dateB - dateA;\n          });\n        case 'popular':\n          return sortedResults.sort((a, b) => {\n            var _a$rating2, _b$rating2;\n            const countA = (a === null || a === void 0 ? void 0 : (_a$rating2 = a.rating) === null || _a$rating2 === void 0 ? void 0 : _a$rating2.count) || 0;\n            const countB = (b === null || b === void 0 ? void 0 : (_b$rating2 = b.rating) === null || _b$rating2 === void 0 ? void 0 : _b$rating2.count) || 0;\n            return countB - countA;\n          });\n        case 'name_asc':\n          return sortedResults.sort((a, b) => {\n            const nameA = ((a === null || a === void 0 ? void 0 : a.name) || '').toLowerCase();\n            const nameB = ((b === null || b === void 0 ? void 0 : b.name) || '').toLowerCase();\n            return nameA.localeCompare(nameB);\n          });\n        case 'name_desc':\n          return sortedResults.sort((a, b) => {\n            const nameA = ((a === null || a === void 0 ? void 0 : a.name) || '').toLowerCase();\n            const nameB = ((b === null || b === void 0 ? void 0 : b.name) || '').toLowerCase();\n            return nameB.localeCompare(nameA);\n          });\n        default:\n          return sortedResults;\n        // relevance (default order)\n      }\n    } catch (sortError) {\n      console.error('Error sorting results:', sortError);\n      return results;\n    }\n  };\n  const saveRecentSearch = query => {\n    const updated = [query, ...recentSearches.filter(s => s !== query)].slice(0, 10);\n    setRecentSearches(updated);\n    localStorage.setItem('recentSearches', JSON.stringify(updated));\n  };\n  const clearRecentSearches = () => {\n    setRecentSearches([]);\n    localStorage.removeItem('recentSearches');\n  };\n  const updateFilter = (filterType, value) => {\n    setFilters(prev => ({\n      ...prev,\n      [filterType]: value\n    }));\n  };\n  const clearFilters = () => {\n    setFilters({\n      category: '',\n      priceRange: [0, 1000],\n      brand: '',\n      size: '',\n      color: '',\n      rating: 0,\n      inStock: false,\n      onSale: false\n    });\n  };\n  const clearSearch = () => {\n    setSearchQuery('');\n    setSearchResults([]);\n    setSuggestions([]);\n    clearFilters();\n  };\n  const getActiveFiltersCount = () => {\n    let count = 0;\n    if (filters.category) count++;\n    if (filters.brand) count++;\n    if (filters.size) count++;\n    if (filters.color) count++;\n    if (filters.rating > 0) count++;\n    if (filters.inStock) count++;\n    if (filters.onSale) count++;\n    if (filters.priceRange[0] > 0 || filters.priceRange[1] < 1000) count++;\n    return count;\n  };\n  const value = {\n    // Search state\n    searchQuery,\n    setSearchQuery,\n    searchResults,\n    searchSuggestions,\n    recentSearches,\n    isSearching,\n    // Filters\n    filters,\n    updateFilter,\n    clearFilters,\n    showFilters,\n    setShowFilters,\n    filterOptions,\n    getActiveFiltersCount,\n    // Sorting\n    sortBy,\n    setSortBy,\n    sortOptions,\n    // Actions\n    performSearch,\n    clearSearch,\n    clearRecentSearches,\n    saveRecentSearch\n  };\n  return /*#__PURE__*/_jsxDEV(SearchContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 399,\n    columnNumber: 5\n  }, this);\n};\n_s2(SearchProvider, \"ugdmbewEAiZYhdDWroZhDqO+Sbk=\");\n_c = SearchProvider;\nvar _c;\n$RefreshReg$(_c, \"SearchProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","localProductService","jsxDEV","_jsxDEV","SearchContext","useSearch","_s","context","Error","SearchProvider","children","_s2","searchQuery","setSearchQuery","searchResults","setSearchResults","searchSuggestions","setSuggestions","recentSearches","setRecentSearches","isSearching","setIsSearching","filters","setFilters","category","priceRange","brand","size","color","rating","inStock","onSale","sortBy","setSortBy","showFilters","setShowFilters","filterOptions","setFilterOptions","categories","brands","sizes","colors","priceRanges","label","min","max","sortOptions","value","savedSearches","localStorage","getItem","JSON","parse","loadFilterOptions","products","getAllProducts","Set","map","p","filter","Boolean","flatMap","prev","error","console","debounceTimer","setTimeout","trim","performSearch","clearTimeout","generateSuggestions","length","suggestions","forEach","product","name","toLowerCase","includes","push","type","text","id","slice","query","Array","isArray","warn","results","searchTerms","split","term","description","tags","join","searchableText","every","filterError","_p$rating","average","originalPrice","price","parseFloat","isNaN","sortResults","saveRecentSearch","sortType","sortedResults","sort","a","b","priceA","priceB","_a$rating","_b$rating","ratingA","ratingB","dateA","Date","createdAt","dateB","_a$rating2","_b$rating2","countA","count","countB","nameA","nameB","localeCompare","sortError","updated","s","setItem","stringify","clearRecentSearches","removeItem","updateFilter","filterType","clearFilters","clearSearch","getActiveFiltersCount","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/USER/OneDrive/Desktop/ecommerce/frontend/src/context/SearchContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport localProductService from '../services/localProductService';\r\n\r\nconst SearchContext = createContext();\r\n\r\nexport const useSearch = () => {\r\n  const context = useContext(SearchContext);\r\n  if (!context) {\r\n    throw new Error('useSearch must be used within a SearchProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const SearchProvider = ({ children }) => {\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [searchSuggestions, setSuggestions] = useState([]);\r\n  const [recentSearches, setRecentSearches] = useState([]);\r\n  const [isSearching, setIsSearching] = useState(false);\r\n  const [filters, setFilters] = useState({\r\n    category: '',\r\n    priceRange: [0, 1000],\r\n    brand: '',\r\n    size: '',\r\n    color: '',\r\n    rating: 0,\r\n    inStock: false,\r\n    onSale: false\r\n  });\r\n  const [sortBy, setSortBy] = useState('relevance');\r\n  const [showFilters, setShowFilters] = useState(false);\r\n\r\n  // Available filter options\r\n  const [filterOptions, setFilterOptions] = useState({\r\n    categories: [],\r\n    brands: [],\r\n    sizes: [],\r\n    colors: [],\r\n    priceRanges: [\r\n      { label: 'Under $25', min: 0, max: 25 },\r\n      { label: '$25 - $50', min: 25, max: 50 },\r\n      { label: '$50 - $100', min: 50, max: 100 },\r\n      { label: '$100 - $200', min: 100, max: 200 },\r\n      { label: 'Over $200', min: 200, max: 1000 }\r\n    ]\r\n  });\r\n\r\n  // Sort options\r\n  const sortOptions = [\r\n    { value: 'relevance', label: 'Best Match' },\r\n    { value: 'price_low', label: 'Price: Low to High' },\r\n    { value: 'price_high', label: 'Price: High to Low' },\r\n    { value: 'rating', label: 'Customer Rating' },\r\n    { value: 'newest', label: 'Newest First' },\r\n    { value: 'popular', label: 'Most Popular' },\r\n    { value: 'name_asc', label: 'Name: A to Z' },\r\n    { value: 'name_desc', label: 'Name: Z to A' }\r\n  ];\r\n\r\n  // Load recent searches from localStorage\r\n  useEffect(() => {\r\n    const savedSearches = localStorage.getItem('recentSearches');\r\n    if (savedSearches) {\r\n      setRecentSearches(JSON.parse(savedSearches));\r\n    }\r\n  }, []);\r\n\r\n  // Load filter options from products\r\n  useEffect(() => {\r\n    const loadFilterOptions = async () => {\r\n      try {\r\n        const products = await localProductService.getAllProducts();\r\n        \r\n        const categories = [...new Set(products.map(p => p.category))];\r\n        const brands = [...new Set(products.map(p => p.brand).filter(Boolean))];\r\n        const sizes = [...new Set(products.flatMap(p => p.sizes || []))];\r\n        const colors = [...new Set(products.flatMap(p => p.colors || []))];\r\n\r\n        setFilterOptions(prev => ({\r\n          ...prev,\r\n          categories,\r\n          brands,\r\n          sizes,\r\n          colors\r\n        }));\r\n      } catch (error) {\r\n        console.error('Error loading filter options:', error);\r\n      }\r\n    };\r\n\r\n    loadFilterOptions();\r\n  }, []);\r\n\r\n  // Perform search with debouncing\r\n  useEffect(() => {\r\n    const debounceTimer = setTimeout(() => {\r\n      if (searchQuery.trim()) {\r\n        performSearch(searchQuery);\r\n      } else {\r\n        setSearchResults([]);\r\n        setSuggestions([]);\r\n      }\r\n    }, 300);\r\n\r\n    return () => clearTimeout(debounceTimer);\r\n  }, [searchQuery, filters, sortBy]);\r\n\r\n  // Generate search suggestions\r\n  useEffect(() => {\r\n    const generateSuggestions = async () => {\r\n      if (searchQuery.length >= 2) {\r\n        try {\r\n          const products = await localProductService.getAllProducts();\r\n          const suggestions = [];\r\n\r\n          // Product name suggestions\r\n          products.forEach(product => {\r\n            if (product.name.toLowerCase().includes(searchQuery.toLowerCase())) {\r\n              suggestions.push({\r\n                type: 'product',\r\n                text: product.name,\r\n                category: product.category,\r\n                id: product.id\r\n              });\r\n            }\r\n          });\r\n\r\n          // Category suggestions\r\n          filterOptions.categories.forEach(category => {\r\n            if (category.toLowerCase().includes(searchQuery.toLowerCase())) {\r\n              suggestions.push({\r\n                type: 'category',\r\n                text: category,\r\n                category: category\r\n              });\r\n            }\r\n          });\r\n\r\n          // Brand suggestions\r\n          filterOptions.brands.forEach(brand => {\r\n            if (brand.toLowerCase().includes(searchQuery.toLowerCase())) {\r\n              suggestions.push({\r\n                type: 'brand',\r\n                text: brand,\r\n                category: 'brand'\r\n              });\r\n            }\r\n          });\r\n\r\n          setSuggestions(suggestions.slice(0, 8));\r\n        } catch (error) {\r\n          console.error('Error generating suggestions:', error);\r\n        }\r\n      } else {\r\n        setSuggestions([]);\r\n      }\r\n    };\r\n\r\n    const debounceTimer = setTimeout(generateSuggestions, 200);\r\n    return () => clearTimeout(debounceTimer);\r\n  }, [searchQuery, filterOptions]);\r\n\r\n  const performSearch = async (query) => {\r\n    setIsSearching(true);\r\n    \r\n    try {\r\n      const products = await localProductService.getAllProducts();\r\n      \r\n      // Validate products array\r\n      if (!Array.isArray(products)) {\r\n        console.warn('Products is not an array:', products);\r\n        setSearchResults([]);\r\n        return;\r\n      }\r\n\r\n      let results = [...products]; // Create a copy to avoid mutations\r\n\r\n      // Text search with better error handling\r\n      if (query && query.trim()) {\r\n        const searchTerms = query.toLowerCase().split(' ').filter(term => term.length > 0);\r\n        \r\n        results = results.filter(product => {\r\n          try {\r\n            // Safely build searchable text with null checks\r\n            const name = product?.name || '';\r\n            const description = product?.description || '';\r\n            const category = product?.category || '';\r\n            const brand = product?.brand || '';\r\n            const tags = Array.isArray(product?.tags) ? product.tags.join(' ') : '';\r\n            \r\n            const searchableText = `${name} ${description} ${category} ${brand} ${tags}`.toLowerCase();\r\n            return searchTerms.every(term => searchableText.includes(term));\r\n          } catch (filterError) {\r\n            console.warn('Error filtering product:', product, filterError);\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n\r\n      // Apply filters with null checks\r\n      if (filters.category) {\r\n        results = results.filter(p => p?.category === filters.category);\r\n      }\r\n\r\n      if (filters.brand) {\r\n        results = results.filter(p => p?.brand === filters.brand);\r\n      }\r\n\r\n      if (filters.size) {\r\n        results = results.filter(p => Array.isArray(p?.sizes) && p.sizes.includes(filters.size));\r\n      }\r\n\r\n      if (filters.color) {\r\n        results = results.filter(p => Array.isArray(p?.colors) && p.colors.includes(filters.color));\r\n      }\r\n\r\n      if (filters.rating > 0) {\r\n        results = results.filter(p => p?.rating?.average && p.rating.average >= filters.rating);\r\n      }\r\n\r\n      if (filters.inStock) {\r\n        results = results.filter(p => p?.inStock === true);\r\n      }\r\n\r\n      if (filters.onSale) {\r\n        results = results.filter(p => p?.originalPrice && p?.price && p.originalPrice > p.price);\r\n      }\r\n\r\n      // Price range filter with null checks\r\n      if (Array.isArray(filters.priceRange) && filters.priceRange.length === 2) {\r\n        results = results.filter(p => {\r\n          const price = parseFloat(p?.price);\r\n          return !isNaN(price) && \r\n                 price >= filters.priceRange[0] && \r\n                 price <= filters.priceRange[1];\r\n        });\r\n      }\r\n\r\n      // Apply sorting\r\n      results = sortResults(results, sortBy);\r\n\r\n      setSearchResults(results || []);\r\n\r\n      // Save search to recent searches\r\n      if (query && query.trim()) {\r\n        saveRecentSearch(query.trim());\r\n      }\r\n    } catch (error) {\r\n      console.error('Search error:', error);\r\n      setSearchResults([]);\r\n    } finally {\r\n      setIsSearching(false);\r\n    }\r\n  };\r\n\r\n  const sortResults = (results, sortType) => {\r\n    if (!Array.isArray(results)) {\r\n      console.warn('sortResults received invalid results:', results);\r\n      return [];\r\n    }\r\n\r\n    const sortedResults = [...results];\r\n\r\n    try {\r\n      switch (sortType) {\r\n        case 'price_low':\r\n          return sortedResults.sort((a, b) => {\r\n            const priceA = parseFloat(a?.price) || 0;\r\n            const priceB = parseFloat(b?.price) || 0;\r\n            return priceA - priceB;\r\n          });\r\n        case 'price_high':\r\n          return sortedResults.sort((a, b) => {\r\n            const priceA = parseFloat(a?.price) || 0;\r\n            const priceB = parseFloat(b?.price) || 0;\r\n            return priceB - priceA;\r\n          });\r\n        case 'rating':\r\n          return sortedResults.sort((a, b) => {\r\n            const ratingA = a?.rating?.average || 0;\r\n            const ratingB = b?.rating?.average || 0;\r\n            return ratingB - ratingA;\r\n          });\r\n        case 'newest':\r\n          return sortedResults.sort((a, b) => {\r\n            const dateA = new Date(a?.createdAt || 0);\r\n            const dateB = new Date(b?.createdAt || 0);\r\n            return dateB - dateA;\r\n          });\r\n        case 'popular':\r\n          return sortedResults.sort((a, b) => {\r\n            const countA = a?.rating?.count || 0;\r\n            const countB = b?.rating?.count || 0;\r\n            return countB - countA;\r\n          });\r\n        case 'name_asc':\r\n          return sortedResults.sort((a, b) => {\r\n            const nameA = (a?.name || '').toLowerCase();\r\n            const nameB = (b?.name || '').toLowerCase();\r\n            return nameA.localeCompare(nameB);\r\n          });\r\n        case 'name_desc':\r\n          return sortedResults.sort((a, b) => {\r\n            const nameA = (a?.name || '').toLowerCase();\r\n            const nameB = (b?.name || '').toLowerCase();\r\n            return nameB.localeCompare(nameA);\r\n          });\r\n        default:\r\n          return sortedResults; // relevance (default order)\r\n      }\r\n    } catch (sortError) {\r\n      console.error('Error sorting results:', sortError);\r\n      return results;\r\n    }\r\n  };\r\n\r\n  const saveRecentSearch = (query) => {\r\n    const updated = [query, ...recentSearches.filter(s => s !== query)].slice(0, 10);\r\n    setRecentSearches(updated);\r\n    localStorage.setItem('recentSearches', JSON.stringify(updated));\r\n  };\r\n\r\n  const clearRecentSearches = () => {\r\n    setRecentSearches([]);\r\n    localStorage.removeItem('recentSearches');\r\n  };\r\n\r\n  const updateFilter = (filterType, value) => {\r\n    setFilters(prev => ({\r\n      ...prev,\r\n      [filterType]: value\r\n    }));\r\n  };\r\n\r\n  const clearFilters = () => {\r\n    setFilters({\r\n      category: '',\r\n      priceRange: [0, 1000],\r\n      brand: '',\r\n      size: '',\r\n      color: '',\r\n      rating: 0,\r\n      inStock: false,\r\n      onSale: false\r\n    });\r\n  };\r\n\r\n  const clearSearch = () => {\r\n    setSearchQuery('');\r\n    setSearchResults([]);\r\n    setSuggestions([]);\r\n    clearFilters();\r\n  };\r\n\r\n  const getActiveFiltersCount = () => {\r\n    let count = 0;\r\n    if (filters.category) count++;\r\n    if (filters.brand) count++;\r\n    if (filters.size) count++;\r\n    if (filters.color) count++;\r\n    if (filters.rating > 0) count++;\r\n    if (filters.inStock) count++;\r\n    if (filters.onSale) count++;\r\n    if (filters.priceRange[0] > 0 || filters.priceRange[1] < 1000) count++;\r\n    return count;\r\n  };\r\n\r\n  const value = {\r\n    // Search state\r\n    searchQuery,\r\n    setSearchQuery,\r\n    searchResults,\r\n    searchSuggestions,\r\n    recentSearches,\r\n    isSearching,\r\n    \r\n    // Filters\r\n    filters,\r\n    updateFilter,\r\n    clearFilters,\r\n    showFilters,\r\n    setShowFilters,\r\n    filterOptions,\r\n    getActiveFiltersCount,\r\n    \r\n    // Sorting\r\n    sortBy,\r\n    setSortBy,\r\n    sortOptions,\r\n    \r\n    // Actions\r\n    performSearch,\r\n    clearSearch,\r\n    clearRecentSearches,\r\n    saveRecentSearch\r\n  };\r\n\r\n  return (\r\n    <SearchContext.Provider value={value}>\r\n      {children}\r\n    </SearchContext.Provider>\r\n  );\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}